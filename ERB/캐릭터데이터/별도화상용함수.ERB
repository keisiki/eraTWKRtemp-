@NUDITYCHECK(CHARA)
#FUNCTION
#DIM CHARA
#DIM NUDITY

SIF CHARA == -1
	CHARA = TARGET
NUDITY = 0

;全身下着
IF EQUIP:(CHARA):9 > 0
	NUDITY += 3
ELSEIF EQUIP:(CHARA):10 > 0
	NUDITY += 3
ELSE
	;下半身下着
	IF EQUIP:(CHARA):5 > 0
		NUDITY += 1
	ELSEIF EQUIP:(CHARA):6 > 0
		NUDITY += 1
	ENDIF
	;上半身下着
	IF EQUIP:(CHARA):7 > 0
		NUDITY += 2
	ELSEIF EQUIP:(CHARA):8 > 0
		NUDITY += 2
	ENDIF
ENDIF

;外衣
SIF EQUIP:(CHARA):18 > 0
	NUDITY += 20

;全身上着
IF EQUIP:(CHARA):13 > 0
	NUDITY += 9
ELSEIF EQUIP:(CHARA):14 > 0
	NUDITY += 9
ELSE
	;上半身上着
	IF EQUIP:(CHARA):16 > 0
		NUDITY += 5
	ELSEIF EQUIP:(CHARA):17 > 0
		NUDITY += 5
	ENDIF
	;下半身上着
	IF EQUIP:(CHARA):11 > 0
		NUDITY += 4
	ELSEIF EQUIP:(CHARA):12 > 0
		NUDITY += 4
	;スカート
	ELSEIF EQUIP:(CHARA):13 > 0
		NUDITY += 4
	ELSEIF EQUIP:(CHARA):14 > 0
		NUDITY += 4
	ENDIF
ENDIF

RETURNF NUDITY

@絶頂判定(CHARA)
#FUNCTION
#DIM CHARA

RETURNF (NOWEX:CHARA:A절정 + NOWEX:CHARA:B절정 + NOWEX:CHARA:C절정 + NOWEX:CHARA:V절정 + NOWEX:CHARA:M절정)

@絶頂判定2(CHARA)
#FUNCTION
#DIM CHARA

SIF EX:CHARA:무자각C절정 + EX:CHARA:무자각V절정 + EX:CHARA:무자각A절정 + EX:CHARA:무자각B절정 + EX:CHARA:무자각M절정 >= 20
	RETURNF 1
RETURNF 0