@GET_SUCCESS_RATE
#FUNCTION
VARSET LOCAL
;친밀
LOCAL += MIN(ABL:친밀, 10) * 5
LOCAL += GETPALAMLV(PALAM:복종, 5) * 3

;반항적. 솔직함
LOCAL -= TALENT:태도 * 5
;다부짐
SIF TALENT:담력 > 0
	LOCAL -= 5

;자존심 높음
SIF TALENT:자존심 > 0
	LOCAL -= 15
;자존심 낮음
SIF TALENT:자존심 < 0
	LOCAL += 5
;눈에띄고싶어함
SIF TALENT:눈에띄고싶어함
	LOCAL += 2
;억압
SIF TALENT:자기애 < 0
	LOCAL -= 10
;저항
SIF TALENT:저항
	LOCAL -= 10
;즉각함락
SIF TALENT:즉각함락
	LOCAL += 10
;성별기호
SIF OTOKOGIRAI(TARGET)
	LOCAL -= 7

LOCAL += TALENT:기분 * 15

;조교자의 소질
;매혹
SIF TALENT:PLAYER:매혹
	LOCAL += 6
;수수께끼의매력
SIF TALENT:PLAYER:수수께끼의매력
	LOCAL += 6
SIF TALENT:PLAYER:매력
	LOCAL += 6

;궁합 체크
R = NO:PLAYER
IF RELATION:R > 0 && RELATION:R < 30
	LOCAL -= 10
ELSEIF RELATION:R > 0 && RELATION:R < 70
	LOCAL -= 6
ELSEIF RELATION:R > 0 && RELATION:R < 100
	LOCAL -= 3
ELSEIF RELATION:R >= 100 && RELATION:R < 130
	LOCAL += 3
ELSEIF RELATION:R >= 100 && RELATION:R < 170
	LOCAL += 6
ELSEIF RELATION:R >= 100 && RELATION:R >= 170
	LOCAL += 10
ENDIF

;호감도
LOCAL += MIN(CFLAG:호감도 / 200, 50)
;신뢰도
LOCAL += MIN(CFLAG:신뢰도 / 20, 50)

;사모
SIF TALENT:사모 || TALENT:애욕
	LOCAL += 20
;연모
SIF TALENT:연모
	LOCAL += 40
LOCAL += (CFLAG:MASTER:310 - CFLAG:TARGET:310) / 500
LOCAL += TFLAG:행운보정 * 20
SIF LOCAL < 0
	LOCAL = 0

DEBUGPRINTFORML SUCCESS_RATE{LOCAL}

RETURNF LOCAL
