@DAILY_CONDITION_EV22
#DIM YOME
#DIM CHILDNUM
SIF CMATCH(TALENT:육아중, 0) == CHARANUM
	RETURN -1
SIF RAND:5 > 0
	RETURN -1
YOME = 0
CALL FISHER_YATES_SHAFFLE(CHARANUM - 1)
FOR LOCAL:10, 0, CHARANUM - 1
	LOCAL = SHAFFLE_ARRAY:(LOCAL:10) + 1
	IF CHK_HAVE_CHILD(LOCAL, CHILD_취학, CHILD_자립) > 0
		YOME = LOCAL
		CHILDNUM = CHK_HAVE_CHILD(LOCAL, CHILD_취학, CHILD_자립)
		BREAK
	ENDIF
NEXT
IF YOME
	CALL DAILY_EV22(YOME, CHILDNUM)
	RETURN 1
ELSE
	RETURN -1
ENDIF


@DAILY_EV22(YOME, CHILDNUM)
#DIM YOME
#DIM CHILDNUM
#DIM 위자료

PRINTFORM %조사처리(CALLNAME:YOME,"로")%부터, 서당에서 %조사처리(CHILDNAME:YOME:CHILDNUM,"가")% 

IF !RAND:4
	PRINTFORMW 다른 아이에게 부상을 입혔다고 전해들었다……
	PRINTFORML 설령 악의가 없었더라도, 보통사람 상대에게 %조사처리(CHILDNAME:YOME:CHILDNUM,"가")% 힘을 준다면 쉽게 상처를 줄 것이다
	PRINTFORML 부모님께 사과한 후에 %CHILDNAME:YOME:CHILDNUM%에게도 잘 말하게 해야……
	PRINTFORML %마스터는% 마음이 무거워졌다
	PRINTFORML 
	CALL KOJO_MESSAGE_SEND("EVENT", 0, YOME, CHILDNUM, 0, "CHILD_DAILY_서당", "다치게 했다")
	위자료 = MIN(10000, MONEY)
	MONEY -= 위자료
	CALL COLORMESSAGE(@"상대방에게 치료비로 {위자료} 지불했다", C_YELLOW, 1,1)
	CALL COLORMESSAGE(@"%CALLNAME:MASTER%의 기력이 일시적으로 줄었다", C_YELLOW, 1,1)
	CALL BUFF_BASE(MASTER, BASE_기력,-1000)
ELSE
	PRINTFORMW 칭찬받았다고 전해들었다……
	PRINTFORML 과연 우리 아이다!
	PRINTFORML 
	CALL KOJO_MESSAGE_SEND("EVENT", 0, YOME, CHILDNUM, 0, "CHILD_DAILY_서당", "칭찬받았다")
	CALL COLORMESSAGE(@"%CALLNAME:MASTER%의 기력이 일시적으로 늘었다", C_YELLOW, 1,1)
	CALL BUFF_BASE(MASTER, BASE_기력, 1000)
ENDIF
PRINTW 
