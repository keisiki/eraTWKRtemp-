@SKIP_MOVE_3(ARG:0, ARG:1)
#DIM 현재위치

;현재위치 취득
현재위치 = CFLAG:MASTER:현재위치
SIF ARG:1
	현재위치 = ARG:1

;잠정 목적지에 직접 이동할 수 있는 경우
IF CAN_MOVE(현재위치, ARG) & 1
	;거기에 이동
	RETURN ARG
ENDIF
;막다른 곳에서 갈 수 있는 장소는 고정이므로, 거기를 목표로 한다
;11파츄리방, 12소악마방로부터는 10 도서관만
IF (현재위치 == 311) || (현재위치 == 312) 
	RETURN 310
ENDIF

;161층 화장실로부터는 9 객실만
IF (현재위치 == 316)
	RETURN 309
ENDIF

;20사쿠야방, 21 빈 방, 22 2층 화장실, 23 메이드 요정 대기소, 24큰발코니로부터는 19 2층복도만
IF (현재위치 == 320) || (현재위치 == 321) || (현재위치 == 322) || (현재위치 == 323) || (현재위치 == 324)
	RETURN 319
ENDIF

;작은발코니로부터는 26 레밀리아방만
IF (현재위치 == 327)
	RETURN 326
ENDIF

;29창고,  30고용인 방, 31 지하실로부터는 28 지하 복도만
IF (현재위치 == 329) || (현재위치 == 330) || (현재위치 == 331)
	RETURN 328
ENDIF

;37폐양관·부엌과 38폐양관·목욕탕으로부터는 35폐양관·객실만
IF (현재위치 == 337) || (현재위치 == 338)
	RETURN 335
ENDIF

;40~423 자매 각 개인 방으로부터는 39 2층복도만
IF (현재위치 == 340) || (현재위치 == 341) || (현재위치 == 342)
	RETURN 339
ENDIF

;44레티의 얼음집, 45 치르노의 얼음집, 46대요정댁으로부터는  43호숫가 마셔
IF (현재위치 == 344) || (현재위치 == 345) || (현재위치 == 346) 
	RETURN 343
ENDIF

;48안개의호수·호저로부터는 47 안개의호수만
IF (현재위치 == 348)
	RETURN 347
ENDIF
;49안개의 저쪽에서는  43호숫가 마셔
IF (현재위치 == 349)
	RETURN 343
ENDIF

;직접 이동할 수 없는 경우,  1개가까운 위치를 잠정 목적지로 다시 설정해 루프
;지점 추가시 요점 보충(전케이스 수정하는 것)
SELECTCASE ARG % 100

;정문
CASE 1
	;정문에 직접 갈 수 없는 경우, (34~42, 44~48) 밖으로부터라면  43호숫가를 목표로 한다
	IF ((현재위치 >= 334) && (현재위치 <= 342)) ||  ((현재위치 >= 344) && (현재위치 <= 348))
		RETURN 343
	;그 이외의(직접 갈 수 없다) 장소로부터는, 2뜰을 목표로 한다
	ELSE
		RETURN 302
	ENDIF
;정
CASE 2
	;뜰을 목표로 하는 경우, 10 도서관, 11 파츄리방, 12소악마방로부터는 7동 테라스를 목표로 한다
	IF (현재위치 == 310) || (현재위치 == 311) || (현재위치 == 312)
		RETURN 307
	;15응접실로부터는 8서쪽테라스를 목표로 한다
	ELSEIF (현재위치 == 315) 
		RETURN 308
	;밖으로부터라면 정문을 목표로 한다
	ELSEIF ((현재위치 >= 334) && (현재위치 <= 347))  
		RETURN 301
	;그 이외의(직접 갈 수 없다) 장소로부터는, 9 객실을 목표로 한다
	ELSE
		RETURN 309
	ENDIF
;수위 오두막
CASE 3
	;수위 오두막에 직접 갈 수 없는 경우, 2뜰을 목표로 한다
	RETURN 302
;빈오두막
CASE 4
	;빈오두막에 직접 갈 수 없는 경우, 2뜰을 목표로 한다
	RETURN 302
;헛간
CASE 5
	;헛간에 직접 갈 수 없는 경우, 6 뒷마당을 목표로 한다
	RETURN 306
;뒷마당
CASE 6
	;뒷마당에 직접 갈 수 없는 경우, (9~33) 관내로부터라면 13 주방을 목표로 한다
	IF  ((현재위치 >= 309) && (현재위치 <= 333))
		RETURN 313
	;그 이외의(직접 갈 수 없다) 장소로부터는, 2뜰을 목표로 한다
	ELSE
		RETURN 302
	ENDIF
;동쪽 테라스
CASE 7
	;동쪽 테라스에 직접 갈 수 없는 경우, (9, 11~33) 관내로부터라면 10 도서관을 목표로 한다
	IF  (현재위치 == 309) || ((현재위치 >= 311) && (현재위치 <= 333))
		RETURN 310
	;그 이외는 2뜰을 목표로 한다
	ELSE
		RETURN 302
	ENDIF
;서테라스
CASE 8
	;서테라스에 직접 갈 수 없는 경우, (10~14, 16~33) 관내로부터라면 15 응접실을 목표로 한다
	IF  ((현재위치 >= 310) && (현재위치 <= 314)) || ((현재위치 >= 316) && (현재위치 <= 333))
		RETURN 315
	;그 이외는 2뜰을 목표로 한다
	ELSE
		RETURN 302
	ENDIF
;객실
CASE 9
	;객실에 직접 안 되는 경우, 5 헛간, 6 뒷마당으로부터라면 13 주방을 목표로 한다
	IF (현재위치 == 305) || (현재위치 == 306)
		RETURN 313
	;11 파츄리방, 12소악마방으로부터라면 10 도서관을 목표로 한다
	ELSEIF (현재위치 == 311) || (현재위치 == 312)
		RETURN 310
	;(19~27) 상층층으로부터라면 17대계단을 목표로 한다
	ELSEIF ((현재위치 >= 319) && (현재위치 <= 327))
		RETURN 317
	;(28~33) 매운들 18 지하 계단을 목표로 한다
	ELSEIF ((현재위치 >= 328) && (현재위치 <= 333))
		RETURN 318
	;그 이외는 2뜰을 목표로 한다
	ELSE
		RETURN 302
	ENDIF
;도서관
CASE 10
	;도서관에 직접 갈 수 없는 경우, 5 헛간, 6 뒷마당 및(13~33) 관내로부터라면 9 객실을 목표로 한다
	IF (현재위치 == 305) || (현재위치 == 306) || ((현재위치 >= 313) && (현재위치 <= 333))
		RETURN 309
	;그 이외는 7동 테라스를 목표로 한다
	ELSE
		RETURN 307
	ENDIF
;파츄리방
CASE 11
	;파츄리방에 직접 갈 수 없는 경우, 10 도서관을 목표로 한다
	RETURN  310
;소악마방
CASE 12
	;소악마방에 직접 갈 수 없는 경우, 10 도서관을 목표로 한다
	RETURN 310
;주방
CASE 13
	;주방에 직접 갈 수 없는 경우, 5 헛간으로부터라면 6 뒷마당을 목표로 한다
	IF (현재위치 == 305)
		RETURN 306
	;그 이외는 9 객실을 목표로 한다
	ELSE
		RETURN 309
	ENDIF
;식당
CASE 14
	;식당에 직접 갈 수 없는 경우, 5 헛간, 6 뒷마당으로부터라면 13 주방을 목표로 한다
	IF (현재위치 == 305) || (현재위치 == 306)
		RETURN 313
	;그 이외는 9 객실을 목표로 한다
	ELSE
		RETURN 309
	ENDIF
;응접실
CASE 15
	;응접실에 직접 갈 수 없는 경우, (10~33) 관내로부터라면 9 객실을 목표로 한다
	IF ((현재위치 >= 310) && (현재위치 <= 333))
		RETURN 309
	;그 이외는 8서테라스를 목표로 한다
	ELSE
		RETURN 308
	ENDIF
;1층 화장실
CASE 16
	;1층 화장실에 직접 갈 수 없는 경우, 9 객실을 목표로 한다
	RETURN 309
;대계단
CASE 17
	;대계단에 직접 갈 수 없는 경우, (20~27) 상층층으로부터라면 19 2층복도를 목표로 한다
	IF ((현재위치 >= 320) && (현재위치 <= 327))
		RETURN 319
	;그 이외는 9 객실을 목표로 한다
	ELSE
		RETURN 309
	ENDIF
;지하 계단
CASE 18
	;지하 계단에 직접 갈 수 없는 경우, (29~33) 지하로부터라면 28 지하 복도를 목표로 한다
	IF ((현재위치 >= 329) && (현재위치 <= 333))
		RETURN 328
	;그 이외는 9 객실을 목표로 한다
	ELSE
		RETURN 309
	ENDIF
;2층복도
CASE 19
	;2층복도에 직접 갈 수 없는 경우, (26, 27) 3층으로부터라면 253층 계단을 목표로 한다
	IF (현재위치 == 326) || (현재위치 == 327)
		RETURN 325
	;그 이외는 17대계단을 목표로 한다
	ELSE
		RETURN 317
	ENDIF
;사쿠야방
CASE 20
	;사쿠야방에 직접 갈 수 없는 경우, 19 2층복도를 목표로 한다
	RETURN 319
;빈 방
CASE 21
	;빈 방에 직접 갈 수 없는 경우, 19 2층복도를 목표로 한다
	RETURN 319
;2층 화장실
CASE 22
	;2층 화장실에 직접 갈 수 없는 경우, 19 2층복도를 목표로 한다
	RETURN 319
;메이드 요정 대기소
CASE 23
	;메이드 요정 대기소에 직접 갈 수 없는 경우, 19 2층복도를 목표로 한다
	RETURN 319
;대발코니
CASE 24
	;대발코니에 직접 갈 수 없는 경우, 19 2층복도를 목표로 한다
	RETURN 319
;3층 계단
CASE 25
	;3층 계단에 직접 갈 수 없는 경우, 27작은발코니로부터는 26 레밀리아방을 목표로 한다
	IF (현재위치 == 327)
		RETURN 326
	;그 이외는 19 2층복도를 목표로 한다
	ELSE
		RETURN 319
	ENDIF
;레밀리아방
CASE 26
	;레밀리아방에 직접 갈 수 없는 경우, 253층 계단을 목표로 한다
	RETURN 325
;소발코니
CASE 27
	;소발코니에 직접 갈 수 없는 경우, 26 레밀리아방을 목표로 한다
	RETURN 326
;지하 복도
CASE 28
	;지하 복도에 직접 갈 수 없는 경우, 33대목욕탕으로부터는 32 탈의실을 목표로 한다
	IF (현재위치 == 333)
		RETURN 332
	;그 이외는 18 지하 계단을 목표로 한다
	ELSE
		RETURN 318
	ENDIF
;창고
CASE 29
	;창고에 직접 안 되는 경우, 28 지하 복도를 목표로 한다
	RETURN 328
;고용인 방
CASE 30
	;고용인 방에 직접 안 되는 경우, 28 지하 복도를 목표로 한다
	RETURN 328
;지하실
CASE 31
	;지하실에 직접 안 되는 경우, 28 지하 복도를 목표로 한다
	RETURN 328
;탈의실
CASE 32
	;탈의실에 직접 안 되는 경우, 28 지하 복도를 목표로 한다
	RETURN 328
;대목욕탕
CASE 33
	;대목욕탕에 직접 안 되는 경우, 32 탈의실를 목표로 한다
	RETURN 332
;폐양관·입구
CASE 34
	;폐양관·입구에 직접 안 되는 경우, (36~42) 관내라면 35 객실을 목표로 한다
	IF ((현재위치 >= 336) && (현재위치 <= 342))
		RETURN 335
	;그 이외는  343호숫가를 목표로 한다
	ELSE
		RETURN 343
	ENDIF
;폐양관·객실
CASE 35
	;폐양관·객실에 직접 안 되는 경우, (39~42) 2층이라면 36 계단을 목표로 한다
	IF ((현재위치 >= 339) && (현재위치 <= 342))
		RETURN 336
	;그 이외는 334폐양관·입구를 목표로 한다
	ELSE
		RETURN 334
	ENDIF
;폐양관·계단
CASE 36
	;폐양관·계단에 직접 안 되는 경우, (40~42) 2층이라면 39 2층복도를 목표로 한다
	IF ((현재위치 >= 340) && (현재위치 <= 342))
		RETURN 339
	;그 이외는 335폐양관 객실을 목표로 한다
	ELSE
		RETURN 335
	ENDIF
;폐양관·부엌
CASE 37
	;폐양관·부엌에 직접 안 되는 경우, 35 객실을 목표로 한다
	RETURN 335
;폐양관·목욕탕
CASE 38
	;폐양관·목욕탕에 직접 안 되는 경우, 35 객실을 목표로 한다
	RETURN 335
;폐양관·2층복도
CASE 39
	;폐양관·2층복도에 직접 안 되는 경우, 36 계단을 목표로 한다
	RETURN 336
;폐양관·루나사방
CASE 40
	;폐양관·루나사방에 직접 안 되는 경우, 39 2층복도를 목표로 한다
	RETURN 339
;폐양관·메를랑방
CASE 41
	;폐양관·메를랑방에 직접 안 되는 경우, 39 2층복도를 목표로 한다
	RETURN 339
;폐양관·리리카방
CASE 42
	;폐양관·리리카방에 직접 안 되는 경우, 39 2층복도를 목표로 한다
	RETURN 339
;호숫가
CASE 43
	;호숫가에 직접 갈 수 없는 경우, (2~33) 홍마관으로부터라면 1 정문을 목표로 한다
	IF ((현재위치 >= 302) && (현재위치 <= 333))
		RETURN 301
	;48안개의호수·호저로부터라면 47 안개의호수를 목표로 한다
	ELSEIF (현재위치 == 348)
		RETURN 347
	;그 이외는 34폐양관·입구를 목표로 한다
	ELSE
		RETURN 334
	ENDIF
;레티의 얼음집
CASE 44
	;레티의 얼음집를 목표로 하는 경우,  43호숫가를 목표로 한다
	RETURN 343
;치르노의 얼음집
CASE 45
	;치르노의 의뢰인 곳간을 목표로 하는 경우,  43호숫가를 목표로 한다
	RETURN 343
;대요정댁
CASE 46
	;대요정댁을 목표로 하는 경우,  43호숫가를 목표로 한다
	RETURN 343
;안개의호수
CASE 47
	;안개의호수를 목표로 하는 경우,  43호숫가를 목표로 한다
	RETURN 343
;안개의호수·호저
CASE 48
	;안개의호수·호저를 목표로 하는 경우, 47 안개의호수를 목표로 한다
	RETURN 347
;안개의 저 편
CASE 49
	;안개의 저 편을 목표로 하는 경우, 43 정문을 목표로 한다
	RETURN 343
ENDSELECT
