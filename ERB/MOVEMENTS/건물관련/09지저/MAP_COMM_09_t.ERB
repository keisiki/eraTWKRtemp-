;--------------------------------------------------
;	맵내 이동 처리 확장 패치 부속
;		지저 MAP용 함수
;--------------------------------------------------
@MAP_PLACENAME_9(ARG)
#FUNCTIONS
#DIM PLACEID
IF GET_MAPID(ARG) == MAIN_MAP
	SELECTCASE ARG
		CASE 901 TO (MAXROOM - 1)
			RETURNF STR:(ARG + 8000)
		CASE 998
			RETURNF OMANEKI_PLACE()
		CASE 999
			RETURNF "스키마 공간"
		CASE MAXROOM
			RETURNF "지상"
		CASEELSE
			RETURNF "불명"
	ENDSELECT
ELSE
	RETURNF "불명"
ENDIF

;@MAP_VIEWING_9
;
;SIF CHK_FOCUS(927, CFLAG:MASTER:현재위치, 930)
;	CALL MAP_OLD_HELL
;SIF CHK_FOCUS(902, CFLAG:MASTER:현재위치, 926)
;	CALL MAP_TIREIDEN
;SIF (CFLAG:MASTER:현재위치 == 901) || CHK_FOCUS(931, CFLAG:MASTER:현재위치, 948)
;	CALL MAP_OLD_CITY
;RETURN 1

@MAP_VIEWING_9(AA,COLOR)
#DIMS REF AA, 0
#DIMS REF COLOR, 0
IF !TFLAG:맵변환
	IF CHK_FOCUS(927, CFLAG:MASTER:현재위치, 930)
		TFLAG:맵변환 = 3
	ELSEIF (CFLAG:MASTER:현재위치 == 901) || CHK_FOCUS(931, CFLAG:MASTER:현재위치, 948)
		TFLAG:맵변환 = 2
	ELSE
		TFLAG:맵변환 = 1
	ENDIF
ENDIF
CALL DRAW_INFORMATIONLINE(@"%MAPNAME:(TFLAG:맵변환)%")
PRINTFORML 
IF RECOLOREDMAPS
TRYCCALLFORM COLOREDMAP_CHIREIDEN_{TFLAG:맵변환}(AA,COLOR)
CATCH
RECOLOREDMAPS = 0
CALL DRAW_MAP
RECOLOREDMAPS = 1
RETURN
ENDCATCH
ELSE
TRYCALLFORM MAP_CHIREIDEN_{TFLAG:맵변환}(AA)
ENDIF


@MAP_CAN_MOVE_9(ARG, ARG:1)
#FUNCTION
#DIM 재택
SELECTCASE ARG
	;구서계단, 동쪽 계단, 분수, 지장
	CASE 907, 908, 924, 947
		RETURNF 0
	;러브호텔, 당신 이외는 들어가지 않는다
	CASE 935
		SIF ARG:1 != MASTER
			RETURNF 0
	CASEELSE
		RETURNF 1
ENDSELECT
RETURNF 1

@MAP_CANNOT_WORD_9(ARG)
SELECTCASE TFLAG:이동불능메시지
ENDSELECT
;PRINTW 공사중
;CLEARLINE 2
;REUSELASTLINE 
;RETURN

@MAP소개_9
;とりあえず5行
PRINTFORML 봉해진 요괴가 사는 지저맵.
PRINTFORML 지저인 만큼 맵 전역이 실내판정이고 맑거나 비가 오지 않는다.
PRINTFORML 코메이지 일가가 살고 있는 지령전은 광활한 데다 곳곳에 애완동물이 있어 항상 지저분하고 청소거리가 많다.
PRINTFORML 한편 구도는 단순한 구조로 시설도 많아 손님이나 모브 요괴로 붐빈다.
PRINTFORML 외출하지 않는 아웃트로 플레이도 재미있다.
