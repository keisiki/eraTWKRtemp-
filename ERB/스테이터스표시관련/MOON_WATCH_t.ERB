;-------------------------------------------------
;함수명 :MOON_WATCH
;개요:어떤 달이 보일까를 돌려주는 함수
;ARG	DAY:3=날
;RETURN -1:월의 안보이는 상태, 0:달은 나와 있지 않은, 1:초생달, 2:이틀월, 3:초승달, 4:4~7 세월, 5:상현달, 6:9~12 세월, 7:십삼야, 8:음력 8월 14일 밤, 9:만월, 10:십육야, 11:17~22밤, 12:하현, 13:24~29밤, 14:30일월
;-------------------------------------------------
@MOON_WATCH(ARG)
#FUNCTION
;밤＋맑음＋옥외 or신사내의 실외
IF TIME:2 >= 5 && TIME:2 <= 7 && TIME:5 < 2 && MOON_WATCH_POINT(CFLAG:MASTER:현재위치)
	;달이 보이는 시간
	SELECTCASE ARG
	;초생달
	CASE 1,31
		RETURNF 1
	;이틀월(19시~20시)
	CASE 2
		SELECTCASE TIME:0
		CASE 1140 TO 1200
		RETURNF 2
		CASEELSE
		RETURNF 0
		ENDSELECT
	;초승달(19시~21시)
	CASE 3
		SELECTCASE TIME:0
		CASE 1140 TO 1260
		RETURNF 3
		CASEELSE
		RETURNF 0
		ENDSELECT
	;4, 5(19시~22시)
	CASE 4,5
		SELECTCASE TIME:0
		CASE 1140 TO 1320
		RETURNF 4
		CASEELSE
		RETURNF 0
		ENDSELECT
	;6, 7(19시~23시)
	CASE 6,7
		SELECTCASE TIME:0
		CASE 1140 TO 1380
		RETURNF 4
		CASEELSE
		RETURNF 0
		ENDSELECT
	;상현달(19시~24시)
	CASE 8
		SELECTCASE TIME:0
		CASE 1140 TO 1440
		RETURNF 5
		CASEELSE
		RETURNF 0
		ENDSELECT
	;9, 10(19시~25시)
	CASE 9,10
		SELECTCASE TIME:0
		CASE 0 TO 60,1140 TO 1440
		RETURNF 6
		CASEELSE
		RETURNF 0
		ENDSELECT
	;11, 12(19시~26시)
	CASE 11,12
		SELECTCASE TIME:0
		CASE 0 TO 120,1140 TO 1440
		RETURNF 6
		CASEELSE
		RETURNF 0
		ENDSELECT
	;십삼야(19시~27시)
	CASE 13
		SELECTCASE TIME:0
		CASE 0 TO 180,1140 TO 1440
		RETURNF 7
		CASEELSE
		RETURNF 0
		ENDSELECT
	;음력 8월 14일 밤(19시~27시 반)
	CASE 14
		SELECTCASE TIME:0
		CASE 0 TO 210,1140 TO 1440
		RETURNF 8
		CASEELSE
		RETURNF 0
		ENDSELECT
	;만월(19시~28시)
	CASE 15
		RETURNF 9
	;십육야(19시 반~28시)
	CASE 16
		SELECTCASE TIME:0
		CASE 0 TO 240,1170 TO 1440
		RETURNF 10
		CASEELSE
		RETURNF 0
		ENDSELECT
	;17, 18, 19(20시 반~28시)
	CASE 17,18,19
		SELECTCASE TIME:0
		CASE 0 TO 240,1230 TO 1440
		RETURNF 11
		CASEELSE
		RETURNF 0
		ENDSELECT
	;20, 21, 22(22시 반~28시)
	CASE 20,21,22
		SELECTCASE TIME:0
		CASE 0 TO 240,1350 TO 1440
		RETURNF 11
		CASEELSE
		RETURNF 0
		ENDSELECT
	;하현(24시~28시)
	CASE 23
		SELECTCASE TIME:0
		CASE 0 TO 240
		RETURNF 12
		CASEELSE
		RETURNF 0
		ENDSELECT
	;24, 25, 26(25시~28시)
	CASE 24,25,26
		SELECTCASE TIME:0
		CASE 60 TO 240
		RETURNF 13
		CASEELSE
		RETURNF 0
		ENDSELECT
	;27, 28, 29(26시~28시)
	CASE 27,28,29
		SELECTCASE TIME:0
		CASE 120 TO 240
		RETURNF 13
		CASEELSE
		ENDSELECT
	;30(27시 반~28시)
	CASE 30
		SELECTCASE TIME:0
		CASE 180 TO 240
		RETURNF 14
		CASEELSE
		RETURNF 0
		ENDSELECT
	ENDSELECT
	ELSE
	RETURNF -1
ENDIF

@NAME_MOON(MOON)
#FUNCTIONS
#DIM  MOON;MOON에는 DAY:3을 건네주는 것
#DIMS CONST NAME_MOON = "", "삭월", "신월", "초승달", "초승달", "상현달", "차가는 달", "십삼야", "음력 8월 14일 밤", "만월", "십육야", "기울어가는 달", "기울어가는 달", "하현달", "그믐달", "그믐달"

MOON = MAX(MOON_WATCH(MOON), 0)
SIF DAY:2 == 3 && MOON == 9
	RETURNF "보름 -중추의 명월- "
RETURNF NAME_MOON:MOON
