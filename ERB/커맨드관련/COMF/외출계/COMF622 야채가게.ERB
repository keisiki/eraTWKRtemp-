@COM622
#DIM 買うもの
;購入条件設定
FOR LOCAL, 0, 1000
	CALL ITEMDATA(LOCAL, "SHOP:야채가게")
	IF RESULT
		CALL ITEMDATA(LOCAL, "SALES")
		ITEMSALES:LOCAL = RESULT
	ENDIF
NEXT
DRAWLINE
CALL LIST_ITEM("야채")
DRAWLINE
PRINTFORML 구입할 아이템을 선택해주세요 소지금:\\{MONEY}
DRAWLINE
CALL SHOW_SHOPPING("야채가게")
DRAWLINE
PRINT [999] - 돌아간다
INPUT
IF RESULT == 999
	TIME += 10
	RETURN -1
ELSE
	買うもの = RESULT
	CALL ITEMDATA(買うもの, "SHOP:야채가게")
	IF RESULT && ITEMSALES:買うもの >= 1 && ITEM:買うもの < 소지수제한
		CALL ITEMDATA(買うもの, "구입")
		SIF !RESULT
			RESTART
	ELSE
		RESTART
	ENDIF
ENDIF
TIME += 10

;-------------------------------------------------
;実行可能判定
;-------------------------------------------------
;야채가게
@COM_ABLE622
;一括管理
SIF GLOBAL_COMABLE(622)
	RETURN RESULT
;야채가게ではない場所
SIF !YASAI_SHOP(CFLAG:MASTER:현재위치)
	RETURN 0
;수면中
SIF CFLAG:수면
	RETURN 0
;시간정지中
SIF FLAG:70
	RETURN 0
RETURN 1

@YASAI_SHOP(ARG)
#FUNCTION
;야채가게
SIF ARG == GET_MAP_REPLACEMENT(227)
	RETURNF 1
SIF ARG == GET_MAP_REPLACEMENT(1013)
	RETURNF 1
RETURNF 0
