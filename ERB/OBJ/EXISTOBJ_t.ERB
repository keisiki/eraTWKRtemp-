;OBJ 존재 설정 함수
@SETLIST_EXIST(CLASS_NAME, O_FIRST = OBJ_ID_FIRST, O_LAST = OBJ_ID_LAST)
#DIMS CLASS_NAME
#DIM O_FIRST
#DIM O_LAST
#DIM O_ID
;변수명 F_NAME를 작성한다
CALLF MAKE_EXIST(CLASS_NAME)

FOR O_ID, O_FIRST, O_LAST + 1
	;개개의 F_NAME:LCOUNT를 설정한다
	TRYCCALLFORM EXIST_%CLASS_NAME%{O_ID}
		;DEBUGPRINTFORML EXIST %CLASS_NAME%{O_ID}
		CALLF SET_EXIST(CLASS_NAME, O_ID)
	CATCH
	ENDCATCH
NEXT

;ID취득 함수용의 설정을 실시한다
TRYCCALLFORM EXIST_%CLASS_NAME%_ID
	;DEBUGPRINTFORML EXIST %CLASS_NAME%NAME_TO_ID
	CALLF OBJNAME_TO_ID(, "RESET", CLASS_NAME)
CATCH
ENDCATCH


;함수의 존재 판정용 함수군
;변수의 의사 정의
@MAKE_EXIST(CLASS_NAME)
#FUNCTION
#DIMS CLASS_NAME
RETURNF OBJ_EXIST("MAKE", CLASS_NAME)

;개개의 함수의 존재 판정을 설정
;먼저 CF_MAKE가 필요
@SET_EXIST(CLASS_NAME, O_ID)
#FUNCTION
#DIMS CLASS_NAME
#DIM  O_ID
RETURNF OBJ_EXIST("SET", CLASS_NAME, O_ID)

;개개의 INDEX의 존재 판정
@GET_EXIST(CLASS_NAME, O_ID)
#FUNCTION
#DIMS CLASS_NAME
#DIM  O_ID
RETURNF OBJ_EXIST("GET", CLASS_NAME, O_ID)



;OBJ의 존재 상태의 보유 함수
;
;거의 일시 변수 보유 변수의 유용으로 일차원 배열로부터 이차원 배열로 했을 뿐
;CLEAR계 명령이 없기 때문에 오소거의 걱정은 없다
@OBJ_EXIST(COMMAND, ARGS:0, ARG:0)
#FUNCTION
#DIMS CLASS_NAME, CLASS_NUM + 1
#DIMS COMMAND
#DIM EXIST, CLASS_NUM + 1, OBJ_ID_LAST + 1
#DIM OBJ_CNT
SELECTCASE COMMAND
;변수의 의사 정의
CASE "MAKE"
	SIF !STRLENS(ARGS:0)
		THROW 변수명을 설정해 주세요
	SIF FINDELEMENT(CLASS_NAME, ESCAPE(ARGS:0) , 1, , 1) > 0
		THROW 이미 설정이 끝난 변수입니다 %ARGS:0%
	SIF OBJ_CNT == CLASS_NUM
		THROW 보유 변수가 상한에 이르고 있습니다
	OBJ_CNT ++
	CLASS_NAME:(OBJ_CNT) = %ARGS:0%
;개개의 변수의 설정
CASE "SET"
	SIF !INRANGE(ARG:0, OBJ_ID_FIRST, OBJ_ID_LAST)
		THROW 배열의 범위외입니다{ARG}
	SIF !STRLENS(ARGS:0)
		THROW 변수명을 설정해 주세요
	LOCAL:0 = FINDELEMENT(CLASS_NAME, ESCAPE(ARGS:0) , 1, , 1)
	SIF LOCAL:0 < 0
		THROW 미설정의 변수입니다 %ARGS:0%
	EXIST:(LOCAL:0):(ARG:0) = 1
;각 함수의 유무 판정
CASE "GET"
	SIF !INRANGE(ARG:0, OBJ_ID_FIRST, OBJ_ID_LAST)
		THROW 배열의 범위외입니다{ARG}
	SIF !STRLENS(ARGS:0)
		THROW 변수명을 설정해 주세요
	LOCAL:0 = FINDELEMENT(CLASS_NAME, ESCAPE(ARGS:0) , 1, , 1)
	SIF LOCAL:0 < 0
		THROW 미설정의 변수입니다 %ARGS:0%
	RETURNF EXIST:(LOCAL:0):(ARG:0)
CASEELSE
	THROW 미설정 명령%COMMAND%
ENDSELECT
